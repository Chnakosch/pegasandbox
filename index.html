<!DOCTYPE html>
<html>
<body>

<script src='https://c11n-prod-eu-central-1.constellation.cloud.pega.net/c11n/8.8.3-478/pega-embed.js'></script>
<pega-embed id='theEmbed' action='createCase' caseTypeID='Haufe-LeadCapture-Work-WhitepaperDownload' casePage='assignment' appAlias='lead-capture' pegaServerUrl='https://chrhfv-hamark-dt1.pegacloud.net/prweb/' staticContentUrl='https://c11n-prod-eu-central-1.constellation.cloud.pega.net/c11n/8.8.3-478/' authService='pega' clientId='49987437234661733137' userIdentifier='myanon' password='UmVrbGFtMjQyNF8=' style='width:100%'></pega-embed>
 
<script>
// Get cookies
let PegaID;
let name = "PegaID=";
let ca = document.cookie.split(';');
for(let i = 0; i < ca.length; i++) {
  let c = ca[i];
  while (c.charAt(0) == ' ') {
    c = c.substring(1);
  }
  if (c.indexOf(name) == 0) {
      PegaID = c.substring(name.length, c.length);
  }
}
 
// Function to handle the embed ready event
function handleEmbedReady() {
  // Now that the embed is ready, add another listener for the embedprocessingend event
  let elEmbedding = document.getElementById("theEmbed");

  // Set cookies
  let PegaID = elEmbedding.getEmbedData(".PegaIDCookie");
  document.cookie = "PegaID=" + PegaID;
 
  elEmbedding.addEventListener("embedprocessingend", function() {
    // Redirect the user when the embedcloseconfirmview event is triggered
    let RedirectURL = elEmbedding.getEmbedData(".RedirectURL");
    window.location.href = RedirectURL;
  });
}
 
// Get the embed element by its ID
let elEmbedding = document.getElementById("theEmbed");
 
// Add the listener for the embed ready event
elEmbedding.addEventListener("embedready", handleEmbedReady);
</script>
 
 
</body>
</html>
